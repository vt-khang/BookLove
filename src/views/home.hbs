<!-- HEADER -->
{{#if registered}}
<header class="vh-100 w-100">
    <nav class="navbar navbar-expand-lg fixed-top" id="navBar">
        <a class="navbar-brand" href="/">
            <img id="logo" src="/images/logo.png" class="d-lg-block d-sm-none d-xs-none d-xxs-none">
            <img id="logoSm" src="/images/logo-sm.png" class="d-lg-none">
        </a>
        <div class="navbar-collapse text-center" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#top">HOME</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#genres">GENRES</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#ranking">RANK</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#discover">DISCOVER</a>
                </li>
            </ul>
        </div>
        <div class="account d-flex align-items-center justify-content-between ms-auto">
            <div class="shopping">
                <a href="/user/bill" class="text-center">
                    <i class="fa-solid fa-cart-shopping"></i>
                </a>
            </div>
            <div class="user dropdown">
                <button type="button" data-bs-toggle="dropdown" aria-expanded="false" class="d-xl-block d-lg-block d-md-none d-sm-none d-xs-none">
                    {{name_user}}
                    <i id="dropdownBtn" class="fa-solid fa-caret-down"></i>
                </button>
                <button type="button" data-bs-toggle="dropdown" aria-expanded="false" class="d-xl-none d-lg-none">
                    <i id="dropdownBtn" class="fa-solid fa-circle-user"></i>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" href="#">
                            Settings
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item" href="/user/profile">
                            <i class="fa-solid fa-circle-user"></i>
                            My Account
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="/log-out">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            Log Out
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <i id="navIcons" class="fa-solid fa-bars d-lg-none" onclick="ShowAndHideMenu();"></i>
    </nav>
    <div class="search position-absolute w-100">
        <div class="container">
            <div class="row d-flex align-items-center justify-content-center">
                <div class="text-center">
                    <h1>Find Your Book</h1>
                </div>
                <form method="GET" action="/search" class="search-bar d-flex justify-content-between">
                    <input type="text" name="q" class="w-100" placeholder="Search by title, author or keyword">
                    <button type="submit" class="btn position-relative"><img src="/icons/search.png" class="img-center"></button>
                </form>
            </div>
        </div>
    </div>
</header>
{{else}}
<header class="vh-100 w-100">
    <nav class="navbar navbar-expand-lg fixed-top" id="navBar">
        <a class="navbar-brand" href="/">
            <img id="logo" src="/images/logo.png" class="d-lg-block d-sm-none d-xs-none d-xxs-none">
            <img id="logoSm" src="/images/logo-sm.png" class="d-lg-none">
        </a>
        <div class="navbar-collapse text-center" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#top">HOME</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#genres">GENRES</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#ranking">RANK</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#discover">DISCOVER</a>
                </li>
                <li class="nav-item">
                    <a class="btn login-btn" href="/log-in">Log In</a>
                </li>
            </ul>
        </div>
        <i id="navIcons" class="fa-solid fa-bars d-lg-none" onclick="ShowAndHideMenu();"></i>
    </nav>
    <div class="search position-absolute w-100">
        <div class="container">
            <div class="row d-flex align-items-center justify-content-center">
                <div class="text-center">
                    <h1>Find Your Book</h1>
                </div>
                <form method="GET" action="/search" class="search-bar d-flex justify-content-between">
                    <input type="text" name="q" class="w-100" placeholder="Search by title, author or keyword">
                    <button type="submit" class="position-relative"><img src="/icons/search.png" class="img-center"></button>
                </form>
            </div>
        </div>
    </div>
</header>
{{/if}}
<script>
    // Sticky navbar
    window.addEventListener("scroll", function() {
        var navBar = document.getElementById("navBar");
        navBar.classList.toggle("sticky", window.scrollY > 0);
    });
</script>
<!-- END HEADER -->

<!-- LOADING -->
<div id="loader" class="loading position-absolute w-100">
    <div class="position-relative vh-100">
        <img src="/icons/loading.gif" class="img-center">
    </div>
</div>
<!-- END LOADING -->

<!-- GENRES -->
<section id="genres">
    <h2 class="title text-center">Browse Genres</h2>
    <p class="title-des text-center">As a writer (or author) knowing the different book genres is vital to your overall knowledge as a professional, and for your book's success. Picking the right book genre matters immensely on your journey to become a bestseller.</p>
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=romance" class="genre-item">
                    <div id="romance-tile" class="position-relative">
                        <img src="/images/genre-1.png" alt="Romance">
                        <span class="text-center img-center">ROMANCE</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=action-and-adventure" class="genre-item">
                    <div id="action-and-adventure-tile" class="position-relative">
                        <img src="/images/genre-2.png" alt="Action & Adventure">
                        <span class="text-center img-center">ACTION & ADVENTURE</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=mystery-and-thriller" class="genre-item">
                    <div id="mystery-and-thriller-tile" class="position-relative">
                        <img src="/images/genre-3.png" alt="Mystery & Thriller">
                        <span class="text-center img-center">MYSTERY & THRILLER</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=biographies-and-history" class="genre-item">
                    <div id="biographies-and-history-tile" class="position-relative">
                        <img src="/images/genre-4.png" alt="Biographies & History">
                        <span class="text-center img-center">BIOGRAPHIES & HISTORY</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div id="collapsibleDownBtn" class="collapsible-btn d-lg-none d-md-none" onclick="Collapse()">
        <button type="button" class="btn position-relative"><i class="fa-solid fa-angle-down text-center"></i></button>
    </div>
    <div id="collapsibleBtn" class="container container-collapse">
        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=childrens" class="genre-item">
                    <div id="childrens-tile" class="position-relative">
                        <img src="/images/genre-5.png" alt="Children's">
                        <span class="text-center img-center">CHILDREN'S</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=young-adult" class="genre-item">
                    <div id="young-adult-tile" class="position-relative">
                        <img src="/images/genre-6.png" alt="Young Adult">
                        <span class="text-center img-center">YOUNG ADULT</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=fantasy" class="genre-item">
                    <div id="fantasy-tile" class="position-relative">
                        <img src="/images/genre-7.png" alt="Fantasy">
                        <span class="text-center img-center">FANTASY</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=historical-fiction" class="genre-item">
                    <div id="historical-fiction-tile" class="position-relative">
                        <img src="/images/genre-8.png" alt="Historical Fiction">
                        <span class="text-center img-center">HISTORICAL FICTION</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=horror" class="genre-item">
                    <div id="horror-tile" class="position-relative">
                        <img src="/images/genre-9.png" alt="Horror">
                        <span class="text-center img-center">HORROR</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=literary-fiction" class="genre-item">
                    <div id="literary-fiction-tile" class="position-relative">
                        <img src="/images/genre-10.png" alt="Literary Fiction">
                        <span class="text-center img-center">LITERARY FICTION</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=non-fiction" class="genre-item">
                    <div id="non-fiction-tile" class="position-relative">
                        <img src="/images/genre-11.png" alt="Non-Fiction">
                        <span class="text-center img-center">NON-FICTION</span>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <a href="/search?genre=science-fiction" class="genre-item">
                    <div id="science-fiction-tile" class="position-relative">
                        <img src="/images/genre-12.png" alt="Science Fiction">
                        <span class="text-center img-center">SCIENCE FICTION</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div id="collapsibleUpBtn" class="collapsible-btn d-lg-none d-md-none d-none" onclick="Collapse()">
        <button type="button" class="btn position-relative"><i class="fa-solid fa-angle-up text-center"></i></button>
    </div>
</section>
<!-- END GENRES -->

<!-- RANKING -->
<section id="ranking">
    <h2 class="title text-center">Top 5 Bestseller</h2>
    <div class="container d-lg-flex d-md-block d-sm-block">
        <div class="left-col">
            <ul class="d-flex align-items-center justify-content-between flex-lg-column flex-md-row">
                <li class="text-center">
                    <div id="dot1" class="dot position-relative dot-active" onclick="ChangeRanking(this.id)">
                        <span class="img-center">1</span>
                    </div>
                </li>
                <li class="text-center">
                    <div class="line">
                        <span></span>
                    </div>
                </li>
                <li class="text-center">
                    <div id="dot2" class="dot position-relative" onclick="ChangeRanking(this.id)">
                        <span class="img-center">2</span>
                    </div>
                </li>
                <li class="text-center">
                    <div class="line">
                        <span></span>
                    </div>
                </li>
                <li class="text-center">
                    <div id="dot3" class="dot position-relative" onclick="ChangeRanking(this.id)">
                        <span class="img-center">3</span>
                    </div>
                </li>
                <li class="text-center">
                    <div class="line">
                        <span></span>
                    </div>
                </li>
                <li class="text-center">
                    <div id="dot4" class="dot position-relative" onclick="ChangeRanking(this.id)">
                        <span class="img-center">4</span>
                    </div>
                </li>
                <li class="text-center">
                    <div class="line">
                        <span></span>
                    </div>
                </li>
                <li class="text-center">
                    <div id="dot5" class="dot position-relative" onclick="ChangeRanking(this.id)">
                        <span class="img-center">5</span>
                    </div>
                </li>
            </ul>
        </div>
        <div class="right-col">
            {{#each tops}}
            <div id="{{this.[1]}}" class="d-lg-flex d-md-block d-sm-block inactive">
                <div class="book-img text-center col-lg-6">
                    <img src="{{this.[0].image}}">
                </div>
                <div class="book-content col-lg-6">
                    <h2>{{this.[0].name}}</h2>
                    <h4>by <a href="https://www.google.com/search?q={{this.[0].arthur}}" target="_blank">{{this.[0].arthur}}</a></h4>
                    <h3>${{this.[0].price}}</h3>
                    <hr>
                    <div>
                        {{#each this.[0].description}}
                            <p>{{this}}</p>
                        {{/each}}
                    </div>
                    <a href="/book/{{this.[0].slug}}" class="read-more">Read More</a>
                </div>
            </div>
            {{/each}}
            </div>
        </div>
    </div>
</section>

<script>
    document.getElementById('top1').classList.remove('inactive');

    function ChangeRanking(id) {
        // Change ranking number
        var dot = document.getElementById(id);
        var dotActive = document.querySelector('.dot-active');
        if (dot.classList.contains('dot-active') == false) {
            dot.classList.add('dot-active');
            dotActive.classList.remove('dot-active');
        }

        // Change ranking content
        var number = id.replace('dot','');
        var top = document.getElementById('top' + number);
        for (var i = 1; i <= 5; i++) {
            if (i == number) {
                top.classList.remove('inactive');
            }
            else {
                var notTop = document.getElementById('top' + i);
                notTop.classList.add('inactive');
            }
        }
    }
</script>
<!-- END RANKING -->

<!-- SLIDER -->
<section id="slider" class="p-0">
    <div class="swiper w-100">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="swiper-container w-100">
                    <img src="/images/slide-book-1.jpg" class="w-100">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="swiper-container w-100">
                    <img src="/images/slide-book-2.jpg" class="w-100">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="swiper-container w-100">
                    <img src="/images/slide-book-3.jpg" class="w-100">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="swiper-container w-100">
                    <img src="/images/slide-book-4.jpg" class="w-100">
                </div>
            </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div>
</section>

<script src="/package/swiper-8.3.2/swiper-bundle.min.js"></script>
<script src="/javascripts/swiper-1.js"></script>
<!-- END SLIDER -->

<!-- DISCOVER -->
<section id="discover">
    <div class="trending-books">
        <h2 class="sub-title">Trending Books</h2>
        <div class="container">
            <div class="row">
                {{#each books}}
                <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">
                    <div class="book-item">
                        <a href="/book/{{this.slug}}">
                            <img src="{{this.image}}" class="w-100">
                        </a>
                        <h2>{{this.name}}</h2>
                        <h4><a href="https://www.google.com/search?q={{this.arthur}}" target="_blank">{{this.arthur}}</a></h4>
                        <h3>${{this.price}}</h3>
                    </div>
                </div>
                {{/each}}
            </div>
            <div class="text-center">
                <a href="/search" class="btn btn-primary view-more-btn">View More</a>
            </div>
        </div>
    </div>
</section>
<!-- END DISCOVER -->

<!-- CONTACT -->
<section id="contact">
    <div class="container d-flex align-items-lg-center justify-content-around">
        <div class="row">
            <div class="contact-left col-lg-6">
                <h2 class="title text-center">Contact Me</h2>
                <div class="w-100">
                    <i class="fa-solid fa-location-dot"></i>
                    <a href="https://goo.gl/maps/QMcF6oy3kD32JAjS9" target="_blank"><span>Ward 9, Phu Nhuan District, Ho Chi Minh City</span></a>
                </div>
                <div class="w-100">
                    <i class="fa-solid fa-phone"></i>
                    <a href="tel:0773100985" target="_blank"><span>0773 100 985</span></a>
                </div>
                <div class="w-100">
                    <i class="fa-solid fa-envelope"></i>
                    <a href="#"><span>vuong.khang3012<br class="d-lg-none d-md-none d-sm-none d-xs-none d-xxs-block">@gmail.com</span></a>
                </div>
                <div class="social-icons w-100 text-center">
                    <a href="https://www.facebook.com/vuongthe.khang" target="_blank"><i class="fa-brands fa-facebook"></i></a>
                    <a href="https://www.linkedin.com/in/vt-khang" target="_blank"><i class="fa-brands fa-linkedin"></i></a>
                    <a href="https://github.com/vt-khang" target="_blank"><i class="fa-brands fa-github"></i></a>
                </div>
                <div class="text-center">
                    <a href="/files/VuongTheKhang-CV.pdf" download>
                        <button class="btn-btn">Download CV</button>
                    </a>
                </div>
            </div>
            <hr class="d-lg-none d-md-block">
            <div class="contact-right col-lg-6">
                <form method="POST" action="/feedback" name="submit-to-google-sheet">
                    <input type="text" name="Name" placeholder="Your Name" required>
                    <input type="email" name="Email" placeholder="Your Email" required>
                    <textarea name="Message" rows="6" placeholder="Your Message"></textarea>
                    <h6 id="msg" class="text-center"></h6>
                    <div class="text-center">
                        <button id="submitBtn" type="submit" class="btn-btn">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzw6m7OxNM1lBo_pOqG2EsCOAU97byQMgKNWiqeZ0cZkv9w1IrQjOBjJ94S3UwcLOJWcQ/exec';
    const form = document.forms['submit-to-google-sheet'];
    const msg = document.getElementById('msg');

    form.addEventListener('submit', e => {
        e.preventDefault();
        fetch(scriptURL, { method: 'POST', body: new FormData(form) })
            .then(() => {
                msg.innerHTML = "Message sent successfully";
                setTimeout(function() {
                    msg.innerHTML = "";
                }, 5000);
                form.reset();
            })
            .catch(error => console.error('Error!', error.message))
    });
</script>
<!-- END CONTACT -->

<!-- FOOTER -->
<footer>
    <p class="text-center">Copyright &copy; by Vuong The Khang | 2022</p>
</footer>
<!-- END FOOTER -->